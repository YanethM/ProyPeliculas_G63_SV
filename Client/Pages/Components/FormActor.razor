@using PraticaSemanaIV.Client.Pages.Components

<div class="container">
    <div class="jumbotron">
        <EditForm Model="Actor" OnValidSubmit="OnValidSubmit">
            <DataAnnotationsValidator></DataAnnotationsValidator>
            @* Input para el nombre: InputText *@
            <div class="mb-3">
                <InputText class="form-control" @bind-Value="@Actor.Name" placeholder="Nombre actor"></InputText>
                <ValidationMessage For="@(()=>Actor.Name)"></ValidationMessage>
            </div>
            @* Input de la fecha de nacimiento: InputDate *@
            <div class="mb-3">
                <InputDate class="form-control" @bind-Value="@Actor.BirthDate"></InputDate>
                <ValidationMessage For="@(()=>Actor.BirthDate)"></ValidationMessage>
            </div>
            @* Input de cantidad de cr√©ditos: InputNumber *@
            <div class="mb-3">
                <InputNumber class="form-control" @bind-Value="@Actor.KnowCredits"></InputNumber>
                <ValidationMessage For="@(()=>Actor.KnowCredits)"></ValidationMessage>
            </div>
            @* Campo que permite cargue de una foto *@
            <div class="form-group">
                <ImageComponent Label="photo" ImageSelected="ImageSelected" ImageOptional="@imageOptional">
                </ImageComponent>
            </div>
            <div class="form-group">
                <button class="btn btn-success">Aceptar</button>
            </div>
        </EditForm>
    </div>
</div>
@code {
    string imageOptional;
    [Parameter] public Actor Actor{ get; set; }
    [Parameter] public EventCallback OnValidSubmit { get; set; }

    protected override void OnInitialized()
    {
        if (!string.IsNullOrEmpty(Actor.Photo))
        {
            imageOptional = Actor.Photo;
            Actor.Photo = null;
        }
    }
    @* Imagen principal seleccionada *@
    private void ImageSelected(string imageB64)
    {
        Actor.Photo = imageB64;
        imageOptional = null;
    }
}